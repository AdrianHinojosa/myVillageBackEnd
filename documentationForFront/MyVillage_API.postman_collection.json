{
	"info": {
		"name": "MyVillage API",
		"description": "# MyVillage Schools Management Platform API\n\nComplete API documentation for the MyVillage backend.\n\n## Base URL\n`http://localhost:3000/development/api/v1/sp`\n\n## Authentication\nAll protected endpoints require a Bearer token in the `Authorization` header.\n\n### User Types\n- **SuperAdmin**: Platform administrators (token expires in 4 hours)\n- **SchoolAdmin**: School users (token expires in 120 hours)\n\n## How to Run All Tests\n1. Set `adminEmail` and `adminPassword` collection variables\n2. Set `schoolEmail` and `schoolPassword` collection variables\n3. Run **Login (SuperAdmin)** first — saves `sAdminToken` automatically\n4. Run **Login (SchoolAdmin)** next — saves `sSchoolToken` and `createdSchoolId` automatically\n5. Click **Run Collection** → Select all requests → **Run**\n\n## Conventions\n- Hungarian Notation: `s`=string/UUID, `b`=boolean, `i`=integer, `d`=decimal, `t`=timestamp, `a`=array, `o`=object\n- Soft deletes via `bActive` flag\n- Pagination: `iPageNumber` (>=1), `iItemsPerPage` (>=1), `sSearch` (optional)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{ "key": "baseUrl", "value": "http://localhost:3000/development/api/v1/sp" },
		{ "key": "sAdminToken", "value": "" },
		{ "key": "sSchoolToken", "value": "" },
		{ "key": "adminEmail", "value": "admin@myvillage.com" },
		{ "key": "adminPassword", "value": "MyVillage0!" },
		{ "key": "schoolEmail", "value": "school@example.com" },
		{ "key": "schoolPassword", "value": "Password123" },
		{ "key": "createdAdminId", "value": "" },
		{ "key": "createdSchoolId", "value": "" },
		{ "key": "createdStudentId", "value": "" },
		{ "key": "createdGoalId", "value": "" },
		{ "key": "createdGoalTaskId", "value": "" },
		{ "key": "testCountryId", "value": "" },
		{ "key": "testStateId", "value": "" },
		{ "key": "adminModuleId", "value": "" }
	],
	"item": [
		{
			"name": "01 - Authentication",
			"description": "Login, logout, password recovery and password setup endpoints.\n\nNo authentication required for login, recovery, setPassword, and verify.",
			"item": [
				{
					"name": "Login (SuperAdmin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has token', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('results');",
									"    pm.expect(json.results).to.have.property('sToken');",
									"    pm.expect(json.results).to.have.property('sUserType');",
									"    pm.collectionVariables.set('sAdminToken', json.results.sToken);",
									"});",
									"pm.test('User type is SuperAdmin', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.results.sUserType).to.eql('SuperAdmin');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{ "key": "Content-Type", "value": "application/json" }],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sEmail\": \"{{adminEmail}}\",\n    \"sPassword\": \"{{adminPassword}}\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] },
						"description": "Authenticate as SuperAdmin.\n\nSaves `sAdminToken` automatically on success.\n\n**Response:** `{ message, status, results: { sUserId, sToken, sEmail, sFullName, sUserType } }`"
					}
				},
				{
					"name": "Login (SchoolAdmin)",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has token', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('results');",
									"    pm.expect(json.results).to.have.property('sToken');",
									"    pm.collectionVariables.set('sSchoolToken', json.results.sToken);",
									"    if (json.results.oSchool && json.results.oSchool.sSchoolId) {",
									"        pm.collectionVariables.set('createdSchoolId', json.results.oSchool.sSchoolId);",
									"    }",
									"});",
									"pm.test('User type is SchoolAdmin', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.results.sUserType).to.eql('SchoolAdmin');",
									"});",
									"pm.test('Response includes school info', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json.results).to.have.property('oSchool');",
									"    pm.expect(json.results.oSchool).to.have.property('sSchoolId');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{ "key": "Content-Type", "value": "application/json" }],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sEmail\": \"{{schoolEmail}}\",\n    \"sPassword\": \"{{schoolPassword}}\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/auth/login", "host": ["{{baseUrl}}"], "path": ["auth", "login"] },
						"description": "Authenticate as SchoolAdmin.\n\nSaves `sSchoolToken` and `createdSchoolId` automatically on success.\n\n**Response:** `{ message, status, results: { sUserId, sToken, sEmail, sFullName, sUserType, oSchool: { sSchoolId, sSchoolName, sSchoolLogo, oImages } } }`"
					}
				},
				{
					"name": "Send Recovery Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has success message', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{ "key": "Content-Type", "value": "application/json" }],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sEmail\": \"{{adminEmail}}\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/auth/recovery", "host": ["{{baseUrl}}"], "path": ["auth", "recovery"] },
						"description": "Send a password recovery email. Detects if user is admin (uses ADMIN_PLATFORM URL) or school user (uses SCHOOLS_PLATFORM URL)."
					}
				},
				{
					"name": "Set Password",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200 or 400/404', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404]);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{ "key": "Content-Type", "value": "application/json" }],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sNewPassword\": \"NewPassword123\",\n    \"sConfirmNewPassword\": \"NewPassword123\",\n    \"sToken\": \"PASTE_RECOVERY_TOKEN_HERE\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/auth/setPassword", "host": ["{{baseUrl}}"], "path": ["auth", "setPassword"] },
						"description": "Set a new password using the recovery token received via email.\n\n**Password requirements:** Min 6 chars, alphanumeric + special chars allowed."
					}
				},
				{
					"name": "Verify Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200 or 400/404', function () {",
									"    pm.expect(pm.response.code).to.be.oneOf([200, 400, 404]);",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": { "raw": "{{baseUrl}}/auth/verify/PASTE_TOKEN_HERE", "host": ["{{baseUrl}}"], "path": ["auth", "verify", "PASTE_TOKEN_HERE"] },
						"description": "Verify a user account using the token from the verification email."
					}
				}
			]
		},
		{
			"name": "02 - Countries & States",
			"description": "Geographic data endpoints. No authentication required.",
			"item": [
				{
					"name": "Get All Countries",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response is array or paginated object', function () {",
									"    var json = pm.response.json();",
									"    if (json.aData) {",
									"        pm.expect(json.aData).to.be.an('array');",
									"        if (json.aData.length > 0) {",
									"            pm.collectionVariables.set('testCountryId', json.aData[0].sCountryId);",
									"        }",
									"    } else {",
									"        pm.expect(json).to.be.an('array');",
									"        if (json.length > 0) {",
									"            pm.collectionVariables.set('testCountryId', json[0].sCountryId);",
									"        }",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/countries?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["countries"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true }
							]
						},
						"description": "Get all countries with optional pagination and search.\n\n**Query params:** `sSearch`, `iPageNumber`, `iItemsPerPage`"
					}
				},
				{
					"name": "Get States by Country",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response contains states', function () {",
									"    var json = pm.response.json();",
									"    if (json.aData) {",
									"        pm.expect(json.aData).to.be.an('array');",
									"        if (json.aData.length > 0) {",
									"            pm.collectionVariables.set('testStateId', json.aData[0].sStateId);",
									"        }",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/countries/{{testCountryId}}/states?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["countries", "{{testCountryId}}", "states"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true }
							]
						},
						"description": "Get all states for a specific country.\n\n**Path params:** `sCountryId` (UUID)\n**Query params:** `sSearch`, `iPageNumber`, `iItemsPerPage`"
					}
				}
			]
		},
		{
			"name": "03 - Cities",
			"description": "City data endpoints. No authentication required.\n\nRequires either `sStateId` OR `sCountryId` as query parameter (one of the two, not both).",
			"item": [
				{
					"name": "Get Cities by State",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/cities?sStateId={{testStateId}}",
							"host": ["{{baseUrl}}"],
							"path": ["cities"],
							"query": [
								{ "key": "sStateId", "value": "{{testStateId}}" }
							]
						},
						"description": "Get cities filtered by state.\n\n**Query params:** `sStateId` (UUID) - XOR with `sCountryId`"
					}
				},
				{
					"name": "Get Cities by Country",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/cities?sCountryId={{testCountryId}}",
							"host": ["{{baseUrl}}"],
							"path": ["cities"],
							"query": [
								{ "key": "sCountryId", "value": "{{testCountryId}}" }
							]
						},
						"description": "Get cities filtered by country.\n\n**Query params:** `sCountryId` (UUID) - XOR with `sStateId`"
					}
				}
			]
		},
		{
			"name": "04 - Administrators",
			"description": "Administrator CRUD endpoints.\n\n**Auth required:** SuperAdmin token (`sAdminToken`).",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var token = pm.collectionVariables.get('sAdminToken');",
							"if (!token || token === '') {",
							"    var baseUrl = pm.collectionVariables.get('baseUrl');",
							"    var email = pm.collectionVariables.get('adminEmail');",
							"    var password = pm.collectionVariables.get('adminPassword');",
							"    pm.sendRequest({",
							"        url: baseUrl + '/auth/login',",
							"        method: 'POST',",
							"        header: { 'Content-Type': 'application/json' },",
							"        body: { mode: 'raw', raw: JSON.stringify({ sEmail: email, sPassword: password }) }",
							"    }, function (err, res) {",
							"        if (!err && res.code === 200) {",
							"            var json = res.json();",
							"            pm.collectionVariables.set('sAdminToken', json.results.sToken);",
							"        }",
							"    });",
							"}"
						]
					}
				}
			],
			"item": [
				{
					"name": "Create Administrator",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has administrator data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    if (json.oData && json.oData.sAdministratorId) {",
									"        pm.collectionVariables.set('createdAdminId', json.oData.sAdministratorId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test\",\n    \"sLastName\": \"Administrator\",\n    \"sSecondLastName\": \"Postman\",\n    \"sEmail\": \"testadmin@example.com\",\n    \"sPhoneNumber\": \"+521234567890\",\n    \"aAdministratorPermissionsSet\": [\n        {\n            \"sAdministratorModuleId\": \"{{adminModuleId}}\",\n            \"sActionCode\": \"WRITE\"\n        }\n    ]\n}"
						},
						"url": { "raw": "{{baseUrl}}/administrators", "host": ["{{baseUrl}}"], "path": ["administrators"] },
						"description": "Create a new administrator.\n\n**Requires:** `General` module WRITE permission\n\n**Body:**\n- `sName` (required)\n- `sLastName` (required)\n- `sSecondLastName` (optional)\n- `sEmail` (required, valid email)\n- `sPhoneNumber` (required)\n- `aAdministratorPermissionsSet` (required, array of `{sAdministratorModuleId, sActionCode}`)"
					}
				},
				{
					"name": "Get All Administrators",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has paginated data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('aData');",
									"    pm.expect(json.aData).to.be.an('array');",
									"    pm.expect(json).to.have.property('iTotalItems');",
									"    if (json.aData.length > 0 && !pm.collectionVariables.get('createdAdminId')) {",
									"        pm.collectionVariables.set('createdAdminId', json.aData[0].sAdministratorId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": {
							"raw": "{{baseUrl}}/administrators?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["administrators"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true },
								{ "key": "bPlatformAccess", "value": "true", "disabled": true }
							]
						},
						"description": "Get all administrators with pagination."
					}
				},
				{
					"name": "Get Administrator Modules",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has modules', function () {",
									"    var json = pm.response.json();",
									"    if (json.aData && json.aData.length > 0) {",
									"        pm.collectionVariables.set('adminModuleId', json.aData[0].sAdministratorModuleId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": {
							"raw": "{{baseUrl}}/administrators/modules?iPageNumber=1&iItemsPerPage=50",
							"host": ["{{baseUrl}}"],
							"path": ["administrators", "modules"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "50" }
							]
						},
						"description": "Get all administrator permission modules. Saves `adminModuleId` for use in Create/Update Administrator."
					}
				},
				{
					"name": "Get One Administrator",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has admin data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('sAdministratorId');",
									"    pm.expect(json).to.have.property('sName');",
									"    pm.expect(json).to.have.property('sEmail');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": { "raw": "{{baseUrl}}/administrators/{{createdAdminId}}", "host": ["{{baseUrl}}"], "path": ["administrators", "{{createdAdminId}}"] },
						"description": "Get a single administrator by ID."
					}
				},
				{
					"name": "Update Administrator",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has success message', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test Updated\",\n    \"sLastName\": \"Administrator\",\n    \"sSecondLastName\": \"Postman\",\n    \"sPhoneNumber\": \"+521234567890\",\n    \"aAdministratorPermissionsSet\": [\n        {\n            \"sAdministratorModuleId\": \"{{adminModuleId}}\",\n            \"sActionCode\": \"ADMIN\"\n        }\n    ]\n}"
						},
						"url": { "raw": "{{baseUrl}}/administrators/{{createdAdminId}}", "host": ["{{baseUrl}}"], "path": ["administrators", "{{createdAdminId}}"] },
						"description": "Update an administrator."
					}
				},
				{
					"name": "Patch Administrator Access",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"bPlatformAccess\": true\n}"
						},
						"url": { "raw": "{{baseUrl}}/administrators/{{createdAdminId}}", "host": ["{{baseUrl}}"], "path": ["administrators", "{{createdAdminId}}"] },
						"description": "Toggle administrator platform access.\n\n**Body:** `bPlatformAccess` (boolean, required)"
					}
				},
				{
					"name": "Delete Administrator",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": { "raw": "{{baseUrl}}/administrators/{{createdAdminId}}", "host": ["{{baseUrl}}"], "path": ["administrators", "{{createdAdminId}}"] },
						"description": "Soft-delete an administrator."
					}
				}
			]
		},
		{
			"name": "05 - Schools",
			"description": "School CRUD endpoints.\n\n**Auth required:** `sAdminToken` (SuperAdmin).\n\nAll requests auto-login as SuperAdmin if token is missing.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var token = pm.collectionVariables.get('sAdminToken');",
							"if (!token || token === '') {",
							"    var baseUrl = pm.collectionVariables.get('baseUrl');",
							"    var email = pm.collectionVariables.get('adminEmail');",
							"    var password = pm.collectionVariables.get('adminPassword');",
							"    pm.sendRequest({",
							"        url: baseUrl + '/auth/login',",
							"        method: 'POST',",
							"        header: { 'Content-Type': 'application/json' },",
							"        body: { mode: 'raw', raw: JSON.stringify({ sEmail: email, sPassword: password }) }",
							"    }, function (err, res) {",
							"        if (!err && res.code === 200) {",
							"            var json = res.json();",
							"            pm.collectionVariables.set('sAdminToken', json.results.sToken);",
							"        }",
							"    });",
							"}"
						]
					}
				}
			],
			"item": [
				{
					"name": "Get Schools Analytics",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has analytics data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('countActiveSchools');",
									"    pm.expect(json).to.have.property('success');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": { "raw": "{{baseUrl}}/schools/analytics", "host": ["{{baseUrl}}"], "path": ["schools", "analytics"] },
						"description": "Get schools analytics dashboard data.\n\n**Response:** `{ message, countActiveSchools, success }`"
					}
				},
				{
					"name": "Create School",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has school data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    pm.expect(json).to.have.property('school');",
									"    if (json.school && json.school.sSchoolId) {",
									"        pm.collectionVariables.set('createdSchoolId', json.school.sSchoolId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test School Postman\",\n    \"sPhone\": \"+521234567890\",\n    \"iUsersLimit\": 10,\n    \"iStudentsLimit\": 100,\n    \"sAdminName\": \"School\",\n    \"sLastName\": \"Admin\",\n    \"sSecondLastName\": \"Test\",\n    \"sEmail\": \"schooltest@example.com\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/schools", "host": ["{{baseUrl}}"], "path": ["schools"] },
						"description": "Create a new school with its initial admin user.\n\nSaves `createdSchoolId` automatically on success.\n\n**Body:**\n- `sName` (required)\n- `sPhone` (optional)\n- `iUsersLimit` (required, positive integer)\n- `iStudentsLimit` (required, positive integer)\n- `sAdminName` (required) - School admin first name\n- `sLastName` (required)\n- `sSecondLastName` (optional)\n- `sEmail` (required) - School admin email\n\n**Response:** `{ message, school: { sSchoolId, sName, ... } }`"
					}
				},
				{
					"name": "Get All Schools",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has paginated data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('schools');",
									"    pm.expect(json.schools).to.be.an('array');",
									"    pm.expect(json).to.have.property('iTotal');",
									"    if (json.schools.length > 0 && !pm.collectionVariables.get('createdSchoolId')) {",
									"        pm.collectionVariables.set('createdSchoolId', json.schools[0].sSchoolId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": {
							"raw": "{{baseUrl}}/schools?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["schools"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true },
								{ "key": "bBlocked", "value": "false", "disabled": true }
							]
						},
						"description": "Get all schools with pagination.\n\n**Response:** `{ message, schools: [...], iTotal, iNumPages, success }`"
					}
				},
				{
					"name": "Get One School",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has school data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('school');",
									"    pm.expect(json.school).to.have.property('sSchoolId');",
									"    pm.expect(json.school).to.have.property('sName');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": { "raw": "{{baseUrl}}/schools/{{createdSchoolId}}", "host": ["{{baseUrl}}"], "path": ["schools", "{{createdSchoolId}}"] },
						"description": "Get a single school by ID.\n\n**Response:** `{ message, school: { sSchoolId, sName, ... }, success }`"
					}
				},
				{
					"name": "Update School",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has success message', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    pm.expect(json).to.have.property('success');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test School Updated\",\n    \"sPhone\": \"+521234567890\",\n    \"iUsersLimit\": 20,\n    \"iStudentsLimit\": 200\n}"
						},
						"url": { "raw": "{{baseUrl}}/schools/{{createdSchoolId}}", "host": ["{{baseUrl}}"], "path": ["schools", "{{createdSchoolId}}"] },
						"description": "Update a school.\n\n**Body:** `sName`, `sPhone`, `iUsersLimit`, `iStudentsLimit`"
					}
				},
				{
					"name": "Patch School Blocked",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has success', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    pm.expect(json).to.have.property('success');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sAdminToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"bBlocked\": false\n}"
						},
						"url": { "raw": "{{baseUrl}}/schools/{{createdSchoolId}}", "host": ["{{baseUrl}}"], "path": ["schools", "{{createdSchoolId}}"] },
						"description": "Toggle school blocked status.\n\n**Body:** `bBlocked` (boolean, required)"
					}
				},
				{
					"name": "Upload School Image",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has school data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    pm.expect(json).to.have.property('success');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"body": {
							"mode": "formdata",
							"formdata": [
								{ "key": "oImage", "type": "file", "src": "" },
								{ "key": "bDeleteImage", "value": "false", "type": "text" }
							]
						},
						"url": { "raw": "{{baseUrl}}/schools/image", "host": ["{{baseUrl}}"], "path": ["schools", "image"] },
						"description": "Upload or delete a school logo image. Must be called with SchoolAdmin token (`sSchoolToken`) — the school is identified from the token context.\n\n**Body (form-data):**\n- `oImage` (file, optional)\n- `bDeleteImage` (boolean, required — set `true` to remove current image)"
					}
				},
				{
					"name": "Delete School",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 201', function () { pm.response.to.have.status(201); });",
									"pm.test('Response has success', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    pm.expect(json).to.have.property('success');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [{ "key": "Authorization", "value": "{{sAdminToken}}" }],
						"url": { "raw": "{{baseUrl}}/schools/{{createdSchoolId}}", "host": ["{{baseUrl}}"], "path": ["schools", "{{createdSchoolId}}"] },
						"description": "Soft-delete a school."
					}
				}
			]
		},
		{
			"name": "06 - Students",
			"description": "Student CRUD endpoints.\n\n**Auth required:** `sSchoolToken` (SchoolAdmin).\n\nAll requests auto-login as SchoolAdmin if token is missing.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var token = pm.collectionVariables.get('sSchoolToken');",
							"if (!token || token === '') {",
							"    var baseUrl = pm.collectionVariables.get('baseUrl');",
							"    var email = pm.collectionVariables.get('schoolEmail');",
							"    var password = pm.collectionVariables.get('schoolPassword');",
							"    pm.sendRequest({",
							"        url: baseUrl + '/auth/login',",
							"        method: 'POST',",
							"        header: { 'Content-Type': 'application/json' },",
							"        body: { mode: 'raw', raw: JSON.stringify({ sEmail: email, sPassword: password }) }",
							"    }, function (err, res) {",
							"        if (!err && res.code === 200) {",
							"            var json = res.json();",
							"            pm.collectionVariables.set('sSchoolToken', json.results.sToken);",
							"            if (json.results.oSchool && json.results.oSchool.sSchoolId) {",
							"                pm.collectionVariables.set('createdSchoolId', json.results.oSchool.sSchoolId);",
							"            }",
							"        }",
							"    });",
							"}"
						]
					}
				}
			],
			"item": [
				{
					"name": "Create Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has student data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    if (json.oData && json.oData.sStudentId) {",
									"        pm.collectionVariables.set('createdStudentId', json.oData.sStudentId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test\",\n    \"sLastName\": \"Student\",\n    \"sSecondLastName\": \"Postman\",\n    \"iBirthYear\": 2015,\n    \"sGrade\": \"3ro Primaria\",\n    \"sGroup\": \"A\",\n    \"sDiagnosis\": \"TDAH\",\n    \"sNotes\": \"Test student created via Postman\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/students", "host": ["{{baseUrl}}"], "path": ["students"] },
						"description": "Create a new student in the school.\n\nSaves `createdStudentId` automatically.\n\n**Body:**\n- `sName` (required)\n- `sLastName` (required)\n- `sSecondLastName` (optional)\n- `iBirthYear` (required, integer)\n- `sGrade` (required)\n- `sGroup` (optional)\n- `sDiagnosis` (optional)\n- `sNotes` (optional)"
					}
				},
				{
					"name": "Get All Students",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has paginated data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('aData');",
									"    pm.expect(json.aData).to.be.an('array');",
									"    if (json.aData.length > 0 && !pm.collectionVariables.get('createdStudentId')) {",
									"        pm.collectionVariables.set('createdStudentId', json.aData[0].sStudentId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": {
							"raw": "{{baseUrl}}/students?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["students"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true },
								{ "key": "sGrade", "value": "", "disabled": true }
							]
						},
						"description": "Get all students in the school with pagination."
					}
				},
				{
					"name": "Get One Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has student data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('sStudentId');",
									"    pm.expect(json).to.have.property('sName');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/students/{{createdStudentId}}", "host": ["{{baseUrl}}"], "path": ["students", "{{createdStudentId}}"] },
						"description": "Get a single student by ID."
					}
				},
				{
					"name": "Update Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sName\": \"Test Updated\",\n    \"sLastName\": \"Student\",\n    \"sSecondLastName\": \"Postman\",\n    \"iBirthYear\": 2015,\n    \"sGrade\": \"4to Primaria\",\n    \"sGroup\": \"B\",\n    \"sDiagnosis\": \"TDAH\",\n    \"sNotes\": \"Updated via Postman\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/students/{{createdStudentId}}", "host": ["{{baseUrl}}"], "path": ["students", "{{createdStudentId}}"] },
						"description": "Update a student."
					}
				},
				{
					"name": "Delete Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/students/{{createdStudentId}}", "host": ["{{baseUrl}}"], "path": ["students", "{{createdStudentId}}"] },
						"description": "Soft-delete a student."
					}
				}
			]
		},
		{
			"name": "07 - Goals",
			"description": "Goal CRUD endpoints for student goals.\n\n**Auth required:** `sSchoolToken` (SchoolAdmin).\n\nAll requests auto-login as SchoolAdmin if token is missing.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var token = pm.collectionVariables.get('sSchoolToken');",
							"if (!token || token === '') {",
							"    var baseUrl = pm.collectionVariables.get('baseUrl');",
							"    var email = pm.collectionVariables.get('schoolEmail');",
							"    var password = pm.collectionVariables.get('schoolPassword');",
							"    pm.sendRequest({",
							"        url: baseUrl + '/auth/login',",
							"        method: 'POST',",
							"        header: { 'Content-Type': 'application/json' },",
							"        body: { mode: 'raw', raw: JSON.stringify({ sEmail: email, sPassword: password }) }",
							"    }, function (err, res) {",
							"        if (!err && res.code === 200) {",
							"            var json = res.json();",
							"            pm.collectionVariables.set('sSchoolToken', json.results.sToken);",
							"            if (json.results.oSchool && json.results.oSchool.sSchoolId) {",
							"                pm.collectionVariables.set('createdSchoolId', json.results.oSchool.sSchoolId);",
							"            }",
							"        }",
							"    });",
							"}"
						]
					}
				}
			],
			"item": [
				{
					"name": "Create Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has goal data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('message');",
									"    if (json.oData && json.oData.sGoalId) {",
									"        pm.collectionVariables.set('createdGoalId', json.oData.sGoalId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sStudentId\": \"{{createdStudentId}}\",\n    \"sTitle\": \"Test Goal from Postman\",\n    \"sDescription\": \"Goal created via automated tests\",\n    \"sMeasurementType\": \"TAREAS\",\n    \"tStartDate\": \"2026-02-01\",\n    \"tTargetDate\": \"2026-06-01\",\n    \"iTargetValue\": 80,\n    \"aTasks\": [\n        { \"sTitle\": \"Task 1\", \"iOrder\": 1 },\n        { \"sTitle\": \"Task 2\", \"iOrder\": 2 }\n    ]\n}"
						},
						"url": { "raw": "{{baseUrl}}/goals", "host": ["{{baseUrl}}"], "path": ["goals"] },
						"description": "Create a new goal for a student. Uses `createdStudentId`.\n\nSaves `createdGoalId` automatically.\n\n**Body:**\n- `sStudentId` (UUID, required)\n- `sTitle` (required)\n- `sDescription` (optional)\n- `sMeasurementType` (required): `EXACTITUD` | `TAREAS` | `ESCALA` | `FRECUENCIA` | `DURACION` | `OPORTUNIDAD`\n- `tStartDate` (required)\n- `tTargetDate` (required)\n- `iTargetValue`, `iTargetDuration`, `iScaleMin`, `iScaleMax`, `sFrequencyUnit` (optional)\n- `aTasks` (optional, array of `{sTitle, iOrder}`)"
					}
				},
				{
					"name": "Get Goals by Student",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has goals array', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('aData');",
									"    pm.expect(json.aData).to.be.an('array');",
									"    if (json.aData.length > 0 && !pm.collectionVariables.get('createdGoalId')) {",
									"        pm.collectionVariables.set('createdGoalId', json.aData[0].sGoalId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": {
							"raw": "{{baseUrl}}/goals/student/{{createdStudentId}}?iPageNumber=1&iItemsPerPage=10",
							"host": ["{{baseUrl}}"],
							"path": ["goals", "student", "{{createdStudentId}}"],
							"query": [
								{ "key": "iPageNumber", "value": "1" },
								{ "key": "iItemsPerPage", "value": "10" },
								{ "key": "sSearch", "value": "", "disabled": true },
								{ "key": "sStatus", "value": "", "disabled": true }
							]
						},
						"description": "Get all goals for a specific student. Uses `createdStudentId`."
					}
				},
				{
					"name": "Get One Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has goal data', function () {",
									"    var json = pm.response.json();",
									"    pm.expect(json).to.have.property('sGoalId');",
									"    pm.expect(json).to.have.property('sTitle');",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}"] },
						"description": "Get a single goal by ID. Uses `createdGoalId`."
					}
				},
				{
					"name": "Update Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sTitle\": \"Updated Goal Title\",\n    \"sDescription\": \"Updated via Postman\",\n    \"tStartDate\": \"2026-02-01\",\n    \"tTargetDate\": \"2026-07-01\",\n    \"iTargetValue\": 90,\n    \"aTasks\": [\n        { \"sTitle\": \"Updated Task 1\", \"bCompleted\": false, \"iOrder\": 1 },\n        { \"sTitle\": \"Updated Task 2\", \"bCompleted\": true, \"iOrder\": 2 }\n    ]\n}"
						},
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}"] },
						"description": "Update a goal. Uses `createdGoalId`."
					}
				},
				{
					"name": "Complete Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sStatus\": \"COMPLETED\"\n}"
						},
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}/complete", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}", "complete"] },
						"description": "Mark a goal as completed or not achieved.\n\n**Body:** `sStatus` (required): `COMPLETED` | `NOT_ACHIEVED`"
					}
				},
				{
					"name": "Delete Goal",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}"] },
						"description": "Soft-delete a goal."
					}
				}
			]
		},
		{
			"name": "08 - Goal Tasks",
			"description": "Goal Task sub-resource endpoints (nested under Goals).\n\n**Auth required:** `sSchoolToken` (SchoolAdmin).\n\nAll requests auto-login as SchoolAdmin if token is missing.",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var token = pm.collectionVariables.get('sSchoolToken');",
							"if (!token || token === '') {",
							"    var baseUrl = pm.collectionVariables.get('baseUrl');",
							"    var email = pm.collectionVariables.get('schoolEmail');",
							"    var password = pm.collectionVariables.get('schoolPassword');",
							"    pm.sendRequest({",
							"        url: baseUrl + '/auth/login',",
							"        method: 'POST',",
							"        header: { 'Content-Type': 'application/json' },",
							"        body: { mode: 'raw', raw: JSON.stringify({ sEmail: email, sPassword: password }) }",
							"    }, function (err, res) {",
							"        if (!err && res.code === 200) {",
							"            var json = res.json();",
							"            pm.collectionVariables.set('sSchoolToken', json.results.sToken);",
							"            if (json.results.oSchool && json.results.oSchool.sSchoolId) {",
							"                pm.collectionVariables.set('createdSchoolId', json.results.oSchool.sSchoolId);",
							"            }",
							"        }",
							"    });",
							"}"
						]
					}
				}
			],
			"item": [
				{
					"name": "Get Goal Tasks",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });",
									"pm.test('Response has tasks', function () {",
									"    var json = pm.response.json();",
									"    var tasks = json.aData || json;",
									"    if (Array.isArray(tasks) && tasks.length > 0) {",
									"        pm.collectionVariables.set('createdGoalTaskId', tasks[0].sGoalTaskId);",
									"    }",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}/goalTasks", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}", "goalTasks"] },
						"description": "Get all tasks for a specific goal. Uses `createdGoalId`. Saves `createdGoalTaskId` automatically."
					}
				},
				{
					"name": "Update Goal Task",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sTitle\": \"Updated Task Title\",\n    \"bCompleted\": false,\n    \"iOrder\": 1\n}"
						},
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}/goalTasks/{{createdGoalTaskId}}", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}", "goalTasks", "{{createdGoalTaskId}}"] },
						"description": "Update a goal task.\n\n**Body:** `sTitle`, `bCompleted` (boolean), `iOrder` (integer)"
					}
				},
				{
					"name": "Toggle Goal Task",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{ "key": "Content-Type", "value": "application/json" },
							{ "key": "Authorization", "value": "{{sSchoolToken}}" }
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"bCompleted\": true\n}"
						},
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}/goalTasks/{{createdGoalTaskId}}/toggle", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}", "goalTasks", "{{createdGoalTaskId}}", "toggle"] },
						"description": "Toggle a goal task's completed status.\n\n**Body:** `bCompleted` (boolean, required)"
					}
				},
				{
					"name": "Delete Goal Task",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"pm.test('Status is 200', function () { pm.response.to.have.status(200); });"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [{ "key": "Authorization", "value": "{{sSchoolToken}}" }],
						"url": { "raw": "{{baseUrl}}/goals/{{createdGoalId}}/goalTasks/{{createdGoalTaskId}}", "host": ["{{baseUrl}}"], "path": ["goals", "{{createdGoalId}}", "goalTasks", "{{createdGoalTaskId}}"] },
						"description": "Delete a goal task."
					}
				}
			]
		}
	]
}
